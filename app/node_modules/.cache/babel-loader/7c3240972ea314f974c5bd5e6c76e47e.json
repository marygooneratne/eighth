{"ast":null,"code":"var _jsxFileName = \"/Users/Goon/Desktop/eighth/app/src/components/ExplorerGraph.js\";\nimport { Chart } from \"frappe-charts/dist/frappe-charts.esm.js\";\nimport \"frappe-charts/dist/frappe-charts.min.css\";\nimport React, { useState } from \"react\";\nimport ReactFrappeChart from \"react-frappe-charts\";\n\nvar get_dates_before = function (fullArray, stopDate) {\n  var dateArray = [];\n  var dateIndex = 0;\n\n  while (fullArray[dateIndex] < stopDate && !(dateIndex > fullArray.length)) {\n    dateArray.push(fullArray[dateIndex]);\n    dateIndex++;\n  }\n\n  return dateArray;\n};\n\nvar get_dates_after = function (fullArray, stopDate) {\n  var dateArray = [];\n  var dateIndex = fullArray.length - 1;\n\n  while (fullArray[dateIndex] > stopDate && dateIndex >= 0) {\n    dateArray.push(fullArray[dateIndex]);\n    dateIndex--;\n  }\n\n  return dateArray;\n};\n\nvar parse_response = function (resp) {\n  var change_transform = function (org) {\n    var changed = org[\"values\"];\n\n    for (var i = 0; i < changed.length; i++) {\n      changed[i][\"date\"] = new Date(changed[i][\"date\"] + \"T00:00:00\");\n    }\n\n    org[\"values\"] = changed;\n    return org;\n  };\n\n  var parsed = JSON.parse(resp);\n  parsed[0][\"value\"] = new Date(parsed[0][\"value\"] + \"T00:00:00\");\n  parsed[1][\"value\"] = new Date(parsed[1][\"value\"] + \"T00:00:00\");\n  var parsed_transforms = parsed[2][\"value\"];\n  parsed_transforms = parsed_transforms.map(transform => change_transform(transform));\n  parsed[2][\"value\"] = parsed_transforms;\n  return parsed;\n};\n\nvar create_blank_dict = function (key) {\n  var blank = {};\n  blank[key] = null;\n  return blank;\n};\n\nexport const ExplorerGraph = () => {\n  const json = '[{\"name\": \"start_date\", \"value\":\"2020-01-01\"},{\"name\": \"end_date\", \"value\":\"2020-01-04\"}, {\"name\": \"Transformations\", \"value\": [{\"ticker\": \"AAPL\",\"transformation\": \"Close\",\"values\":[{\"date\":\"2020-01-01\",\"values\":[{\"Close\": 345.45}]},{\"date\":\"2020-01-02\",\"values\":[{\"Close\": 325.45}]}]},{\"ticker\": \"AAPL\",\"transformation\": \"Pivot Points\", \"values\":[{\"date\":\"2020-01-03\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 446.71}, {\"Resistance 2\": 548.71},{\"Support 1\": 43.71},{\"Support 2\": 141.71}]},{\"date\": \"2020-01-04\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 446.71},{\"Resistance 2\": 548.71},{\"Support 1\": 43.71},{\"Support 2\": 141.71}]}]}]}]'; // Parse and label parts of response\n\n  var response = parse_response(json);\n  var t = response[2];\n  var t_values = t[\"value\"];\n  var start_date = response[0][\"value\"];\n  var end_date = response[1][\"value\"]; // Find transform with << start date and >>> end date\n\n  var correct_start = t_values.filter(transform => transform[\"values\"][0][\"date\"].getTime() == start_date.getTime())[0];\n  var correct_end = t_values.filter(transform => transform[\"values\"][transform[\"values\"].length - 1][\"date\"].getTime() == end_date.getTime())[0]; // create array of dates from earliest start and array of dates from latest start\n\n  var start_array = correct_start[\"values\"].map(data => data[\"date\"]);\n  var end_array = correct_end[\"values\"].map(data => data[\"date\"]); // iterate through transforms and add empty dates to create consistent length\n\n  for (var i = 0; i < t_values.length; i++) {\n    console.log(i);\n    var full_values = t_values[i][\"values\"];\n    var prepend_dates = get_dates_before(start_array, full_values[0][\"date\"]);\n    var blank_vals = [];\n    full_values[0][\"values\"].map(val => blank_vals.push(create_blank_dict(Object.keys(val)[0])));\n\n    for (var date_key = prepend_dates.length - 1; date_key >= 0; date_key--) {\n      var entry = {\n        date: prepend_dates[date_key],\n        values: blank_vals\n      };\n      full_values.unshift(entry);\n    }\n\n    var append_dates = get_dates_after(end_array, full_values[full_values.length - 1][\"date\"]);\n\n    for (var date_key = append_dates.length - 1; date_key >= 0; date_key--) {\n      var entry = {\n        date: append_dates[date_key],\n        values: blank_vals\n      };\n      full_values.push(entry);\n    }\n\n    console.log(full_values);\n    t_values[i][\"values\"] = full_values; //can u change array in for each loop\n  }\n\n  response[2][\"value\"] = t_values; //split\n  // Create full date array\n\n  var full_dates = response[2][\"value\"][0][\"values\"].map(full => full[\"date\"]);\n  var dataset_dictionary = {}; // {\"ticker\": \"AAPL\",\"transformation\": \"Pivot Points\", \"values\":[{\"date\":\"01-03-2020\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 346.71},\n  // // Create dataset of values for each transform and subtransform\n\n  for (var transform_index in response[2][\"value\"]) {\n    var transform = response[2][\"value\"][transform_index];\n    const ticker = transform[\"ticker\"];\n    const transform_name = transform[\"transformation\"];\n\n    for (var day_index in transform[\"values\"]) {\n      var day = transform[\"values\"][day_index];\n\n      for (var value_index in day[\"values\"]) {\n        var value = day[\"values\"][value_index];\n        var value_name = Object.keys(value)[0];\n        var dataset_name = ticker + \" (\" + transform_name + \")\" + \" — \" + value_name;\n\n        if (!Object.keys(dataset_dictionary).includes(dataset_name)) {\n          dataset_dictionary[dataset_name] = [];\n        }\n\n        dataset_dictionary[dataset_name].push(value[value_name]);\n      }\n    }\n  } // Convert dictionary into dataset\n\n\n  var datasets = [];\n  Object.keys(dataset_dictionary).forEach(function (key) {\n    datasets.push({\n      name: key,\n      chartType: \"line\",\n      values: dataset_dictionary[key]\n    });\n  });\n  console.log(dataset_dictionary);\n  console.log(datasets);\n  const data = {\n    labels: full_dates,\n    datasets: datasets,\n    yMarkers: [{\n      label: \"High\",\n      value: 60,\n      options: {\n        labelPos: \"left\"\n      }\n    }]\n  };\n  return /*#__PURE__*/React.createElement(ReactFrappeChart, {\n    data: data,\n    title: \"APPL vs. MACD(MSFT)\",\n    type: \"axis-mixed\",\n    height: \"600\",\n    colors: [\"#25282A\", \"#D0D3D4\", \"#FFFFFF\", \"#60B200\", \"#D5FFA5\", \"#33FF00\"],\n    axisOptions: {\n      xAxisMode: \"tick\",\n      xIsSeries: true\n    },\n    barOptions: {\n      stacked: false,\n      spaceRatio: 0.2\n    },\n    tooltipOptions: {\n      formatTooltipX: d => (d + \"\").toUpperCase(),\n      formatTooltipY: d => d + \" pts\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  });\n};","map":{"version":3,"sources":["/Users/Goon/Desktop/eighth/app/src/components/ExplorerGraph.js"],"names":["Chart","React","useState","ReactFrappeChart","get_dates_before","fullArray","stopDate","dateArray","dateIndex","length","push","get_dates_after","parse_response","resp","change_transform","org","changed","i","Date","parsed","JSON","parse","parsed_transforms","map","transform","create_blank_dict","key","blank","ExplorerGraph","json","response","t","t_values","start_date","end_date","correct_start","filter","getTime","correct_end","start_array","data","end_array","console","log","full_values","prepend_dates","blank_vals","val","Object","keys","date_key","entry","date","values","unshift","append_dates","full_dates","full","dataset_dictionary","transform_index","ticker","transform_name","day_index","day","value_index","value","value_name","dataset_name","includes","datasets","forEach","name","chartType","labels","yMarkers","label","options","labelPos","xAxisMode","xIsSeries","stacked","spaceRatio","formatTooltipX","d","toUpperCase","formatTooltipY"],"mappings":"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","sourcesContent":["import { Chart } from \"frappe-charts/dist/frappe-charts.esm.js\";\nimport \"frappe-charts/dist/frappe-charts.min.css\";\nimport React, { useState } from \"react\";\nimport ReactFrappeChart from \"react-frappe-charts\";\n\nvar get_dates_before = function (fullArray, stopDate) {\n  var dateArray = [];\n  var dateIndex = 0;\n  while (fullArray[dateIndex] < stopDate && !(dateIndex > fullArray.length)) {\n    dateArray.push(fullArray[dateIndex]);\n    dateIndex++;\n  }\n  return dateArray;\n};\n\nvar get_dates_after = function (fullArray, stopDate) {\n  var dateArray = [];\n  var dateIndex = fullArray.length - 1;\n  while (fullArray[dateIndex] > stopDate && dateIndex >= 0) {\n    dateArray.push(fullArray[dateIndex]);\n    dateIndex--;\n  }\n  return dateArray;\n};\n\nvar parse_response = function (resp) {\n  var change_transform = function (org) {\n    var changed = org[\"values\"];\n    for (var i = 0; i < changed.length; i++) {\n      changed[i][\"date\"] = new Date(changed[i][\"date\"] + \"T00:00:00\");\n    }\n    org[\"values\"] = changed;\n    return org;\n  };\n\n  var parsed = JSON.parse(resp);\n  parsed[0][\"value\"] = new Date(parsed[0][\"value\"] + \"T00:00:00\");\n  parsed[1][\"value\"] = new Date(parsed[1][\"value\"] + \"T00:00:00\");\n\n  var parsed_transforms = parsed[2][\"value\"];\n  parsed_transforms = parsed_transforms.map((transform) =>\n    change_transform(transform)\n  );\n  parsed[2][\"value\"] = parsed_transforms;\n\n  return parsed;\n};\n\nvar create_blank_dict = function (key) {\n  var blank = {};\n  blank[key] = null;\n  return blank;\n};\n\nexport const ExplorerGraph = () => {\n  const json =\n    '[{\"name\": \"start_date\", \"value\":\"2020-01-01\"},{\"name\": \"end_date\", \"value\":\"2020-01-04\"}, {\"name\": \"Transformations\", \"value\": [{\"ticker\": \"AAPL\",\"transformation\": \"Close\",\"values\":[{\"date\":\"2020-01-01\",\"values\":[{\"Close\": 345.45}]},{\"date\":\"2020-01-02\",\"values\":[{\"Close\": 325.45}]}]},{\"ticker\": \"AAPL\",\"transformation\": \"Pivot Points\", \"values\":[{\"date\":\"2020-01-03\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 446.71}, {\"Resistance 2\": 548.71},{\"Support 1\": 43.71},{\"Support 2\": 141.71}]},{\"date\": \"2020-01-04\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 446.71},{\"Resistance 2\": 548.71},{\"Support 1\": 43.71},{\"Support 2\": 141.71}]}]}]}]';\n  // Parse and label parts of response\n  var response = parse_response(json);\n  var t = response[2];\n  var t_values = t[\"value\"];\n  var start_date = response[0][\"value\"];\n  var end_date = response[1][\"value\"];\n  // Find transform with << start date and >>> end date\n  var correct_start = t_values.filter(\n    (transform) =>\n      transform[\"values\"][0][\"date\"].getTime() == start_date.getTime()\n  )[0];\n  var correct_end = t_values.filter(\n    (transform) =>\n      transform[\"values\"][transform[\"values\"].length - 1][\"date\"].getTime() ==\n      end_date.getTime()\n  )[0];\n  // create array of dates from earliest start and array of dates from latest start\n  var start_array = correct_start[\"values\"].map((data) => data[\"date\"]);\n  var end_array = correct_end[\"values\"].map((data) => data[\"date\"]);\n\n  // iterate through transforms and add empty dates to create consistent length\n  for (var i = 0; i < t_values.length; i++) {\n    console.log(i);\n    var full_values = t_values[i][\"values\"];\n    var prepend_dates = get_dates_before(start_array, full_values[0][\"date\"]);\n\n    var blank_vals = [];\n    full_values[0][\"values\"].map((val) =>\n      blank_vals.push(create_blank_dict(Object.keys(val)[0]))\n    );\n    for (var date_key = prepend_dates.length - 1; date_key >= 0; date_key--) {\n      var entry = { date: prepend_dates[date_key], values: blank_vals };\n      full_values.unshift(entry);\n    }\n    var append_dates = get_dates_after(\n      end_array,\n      full_values[full_values.length - 1][\"date\"]\n    );\n    for (var date_key = append_dates.length - 1; date_key >= 0; date_key--) {\n      var entry = { date: append_dates[date_key], values: blank_vals };\n      full_values.push(entry);\n    }\n    console.log(full_values);\n    t_values[i][\"values\"] = full_values; //can u change array in for each loop\n  }\n  response[2][\"value\"] = t_values;\n  //split\n  // Create full date array\n\n  var full_dates = response[2][\"value\"][0][\"values\"].map(\n    (full) => full[\"date\"]\n  );\n  var dataset_dictionary = {};\n  // {\"ticker\": \"AAPL\",\"transformation\": \"Pivot Points\", \"values\":[{\"date\":\"01-03-2020\",\"values\":[{\"Pivot\": 345.45},{\"Resistance 1\": 346.71},\n\n  // // Create dataset of values for each transform and subtransform\n  for (var transform_index in response[2][\"value\"]) {\n    var transform = response[2][\"value\"][transform_index];\n    const ticker = transform[\"ticker\"];\n    const transform_name = transform[\"transformation\"];\n    for (var day_index in transform[\"values\"]) {\n      var day = transform[\"values\"][day_index];\n      for (var value_index in day[\"values\"]) {\n        var value = day[\"values\"][value_index];\n        var value_name = Object.keys(value)[0];\n        var dataset_name =\n          ticker + \" (\" + transform_name + \")\" + \" — \" + value_name;\n        if (!Object.keys(dataset_dictionary).includes(dataset_name)) {\n          dataset_dictionary[dataset_name] = [];\n        }\n        dataset_dictionary[dataset_name].push(value[value_name]);\n      }\n    }\n  }\n  // Convert dictionary into dataset\n  var datasets = [];\n  Object.keys(dataset_dictionary).forEach(function (key) {\n    datasets.push({\n      name: key,\n      chartType: \"line\",\n      values: dataset_dictionary[key],\n    });\n  });\n  console.log(dataset_dictionary);\n  console.log(datasets);\n\n  const data = {\n    labels: full_dates,\n\n    datasets: datasets,\n\n    yMarkers: [{ label: \"High\", value: 60, options: { labelPos: \"left\" } }],\n  };\n\n  return (\n    <ReactFrappeChart\n      data={data}\n      title=\"APPL vs. MACD(MSFT)\"\n      type=\"axis-mixed\"\n      height=\"600\"\n      colors={[\n        \"#25282A\",\n        \"#D0D3D4\",\n        \"#FFFFFF\",\n        \"#60B200\",\n        \"#D5FFA5\",\n        \"#33FF00\",\n      ]}\n      axisOptions={{\n        xAxisMode: \"tick\",\n        xIsSeries: true,\n      }}\n      barOptions={{\n        stacked: false,\n        spaceRatio: 0.2,\n      }}\n      tooltipOptions={{\n        formatTooltipX: (d) => (d + \"\").toUpperCase(),\n        formatTooltipY: (d) => d + \" pts\",\n      }}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}